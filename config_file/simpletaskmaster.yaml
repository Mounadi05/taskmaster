# Server configuration
# Controls how Taskmaster server communicates with clients
## server not required , if not exist it will use default values
# server:
#     type: "socket"  
#     port: 1337     
#     host: "localhost" 
server:
    type: "http"    # http or socket     
    # host: "localhost"  # Hostname or IP address    
    port: 9090     # Port number for the server

smtp:
  enabled: true
  server: smtp.example.com
  port: 587
  use_tls: true
  username: "notifier@example.com"
  password: "your_password"  # consider supporting env var or vault

webui:
  enabled: true
  host: "127.0.0.1"     
  port: 8080
  auth:
    enabled: true
    username: "admin"
    password: "admin" 

# Programs configuration section
#   pro1:
#     cmd: "/home/kali/wwwl"
#     numprocs: 1
#     umask: "022"
#     user: "kali"
#     group: "kali"
#     priority: 10
#     workingdir: /home/kali
#     autostart: true
#     autorestart: always
#     exitcodes: [0]
#     startretries: 3
#     startsecs: 1
#     stopsignal: TERM
#     stoptsecs: 5
#     on_failure:
#       smtp:
#         enabled: true
#         subject: "Echo Test Failed"
#         body: "The echo_test program failed to start."
#         from: "taskmaster@example.com"
#         to:
#           - "admin1@example.com"
#           - "admin2@example.com"
#     on_success:
#       smtp:
#         enabled: true
#         subject: "Echo Test Succeeded"
#         body: "The echo_test program started successfully."
#         from: "taskmaster@example.com"
#         to:
#           - "admin1@example.com"
#           - "admin2@example.com"
#     stdout: 
#       path : /tmp/pro1.stdout
#       maxbytes: 1024
#     stderr: /tmp/pro1.stderr
#     env:
#       TEST_VAR: "test_value"


programs:

  scan_network:
    cmd: "/usr/bin/nmap 192.168.1.1"
    autostart: true
    user: "kali"
    group: "kali"
    priority: 10
    workingdir: /home/kali/work
    stdout: 
      path : /tmp/www.stdout
      maxbytes: 1024
    startsecs: 5
    

  pro6:
    cmd: "/home/kali/pro6.sh"
    numprocs: 4
    umask: "022"
    user: "kali"
    group: "kali"
    priority: 10
    workingdir: /tmp
    autostart: true
    autorestart: never
    exitcodes: [0]
    startretries: 3
    startsecs: 1
    stopsignal: TERM
    stoptsecs: 5

  writer:
    cmd: "python3 /home/kali/testing/test.py"
    numprocs: 5
    umask: "777"
    user: "kali"
    group: "kali"
    priority: 10
    workingdir: /home/kali/testing/
    autostart: true
    exitcodes: [0]
    startretries: 3

  test_signal:
    cmd: "python3 /home/kali/work/test_signal.py"
    numprocs: 1
    umask: "022"
    priority: 10
    workingdir: /home/kali
    autostart: true
    stopsignal: USR1
    stoptsecs: 2
    stdout: 
      path : /tmp/signal.stdout
      maxbytes: 1024
    stderr: /tmp/signal.stderr
  
  pro4:
    cmd: "/home/kali/test05"
    numprocs: 11
    umask: "022"
    exitcodes: [-9]
    autorestart: unexpected
    stdout: 
      path : /tmp/05.stdout
      maxbytes: 1024
    stderr: /tmp/05.stderr
